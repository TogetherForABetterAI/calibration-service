# ---------------------------------------------------------------------------
# New Relic Agent Configuration File
# ---------------------------------------------------------------------------

# This file contains configuration options for the New Relic Python agent.
# Lines that start with # are comments and are ignored.

# You must set the license key below. The application name should also be
# set appropriately for each application.

# License key and app name can be overridden by environment variables.

[newrelic]

# ---------------------------------------------------------------------------
# License Key
# ---------------------------------------------------------------------------
# Your New Relic license key. This can be overridden by setting the
# environment variable NEW_RELIC_LICENSE_KEY.
# Using environment variable for security - see .env file
# license_key =

# ---------------------------------------------------------------------------
# Application Name
# ---------------------------------------------------------------------------
# Set the name of your application as you would like it to show up in the
# New Relic UI. This can be overridden by setting the environment variable
# NEW_RELIC_APP_NAME.
app_name = calibration-service

# ---------------------------------------------------------------------------
# Environment
# ---------------------------------------------------------------------------
# When enabled, the agent will collect environment information about the
# Python environment and running application.
monitor_mode = true

# Set the log level. Must be one of: critical, error, warning, info, debug
# The log output will go to stderr by default. Can be configured to log to a file.
log_level = info

# ---------------------------------------------------------------------------
# High Security Mode
# ---------------------------------------------------------------------------
# When enabled, the agent will not send raw query parameters and will require
# SSL. This helps ensure sensitive data is not sent to New Relic.
high_security = false

# ---------------------------------------------------------------------------
# Transaction Tracer
# ---------------------------------------------------------------------------
# Enable transaction tracer. When enabled, the agent will collect detailed
# information about slow transactions.
transaction_tracer.enabled = true

# Threshold in seconds for when to collect a transaction trace. When the
# response time of a controller action exceeds this threshold, a transaction
# trace will be recorded and sent to the New Relic servers.
transaction_tracer.transaction_threshold = apdex_f

# When transaction tracer is on, SQL statements can optionally be recorded.
# The allowed values are 'off', 'raw', and 'obfuscated'. 
transaction_tracer.record_sql = obfuscated

# Stack traces are included in the transaction traces when slow SQL
# is recorded. The threshold controls what is slow enough to warrant
# a stack trace.
transaction_tracer.stack_trace_threshold = 0.5

# ---------------------------------------------------------------------------
# Error Collector
# ---------------------------------------------------------------------------
# Enable error reporting.
error_collector.enabled = true

# Error collector will not collect errors with these status codes
# Monitoring all errors for comprehensive error tracking
error_collector.ignore_status_codes = 100-102 200-208 226 300-308

# ---------------------------------------------------------------------------
# Browser Monitoring
# ---------------------------------------------------------------------------
# Browser monitoring is not applicable to backend services.
browser_monitoring.auto_instrument = false

# ---------------------------------------------------------------------------
# Thread Profiler
# ---------------------------------------------------------------------------
# Enable thread profiling. Thread profiler will capture stack traces of all
# threads every 100ms.
thread_profiler.enabled = true

# ---------------------------------------------------------------------------
# Distributed Tracing
# ---------------------------------------------------------------------------
# Enable distributed tracing to see the path that a request takes as it
# travels through your distributed system.
distributed_tracing.enabled = true

# ---------------------------------------------------------------------------
# Span Events
# ---------------------------------------------------------------------------
# Enable collection of span events which represent individual segments of work
# in a distributed trace.
span_events.enabled = true

# ---------------------------------------------------------------------------
# Process Host Display
# ---------------------------------------------------------------------------
# Enable enhanced process information and container metrics
process_host.display_name = calibration-service-container

# ---------------------------------------------------------------------------
# Application Logging
# ---------------------------------------------------------------------------
# Enable application logging features to forward logs to New Relic.
application_logging.enabled = true
application_logging.forwarding.enabled = true
application_logging.metrics.enabled = true
application_logging.local_decorating.enabled = false

# ---------------------------------------------------------------------------
# Custom Instrumentation
# ---------------------------------------------------------------------------
# Additional instrumentation settings for specific frameworks
[newrelic:instrumentation]

# Automatically instrument gRPC
grpc.enabled = true

# Automatically instrument RabbitMQ (pika)
pika.enabled = true

# Automatically instrument MLflow
mlflow.enabled = true
